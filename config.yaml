# config.yaml
# This file contains the default configuration

# Global setting
config_path: 'config.yaml'
enable_seed: True  # apply seed globally
seed: 42
enable_gpu: True
enable_rewrite_output_dir: True
output_dir: 'C:\mydata\output\p2_ded_bead_profile\v1.0'
enable_uuid_naming: True # if false, use customized naming
extra_name: 'hyper_tune.ratio_0.7.lr_1.5e-5.b16-embed4-enclayer1'
enable_computational_test: False

# Data
dataset_dir: 'C:\mydata\dataset\p2_ded_bead_profile\20240724'
dataset_name: 'High_const_sin_1_dataset.pt' # 'simu_data' for random init
raw_data_size: 121
enable_iterate_dataset: True # iterate for all sub datasets in the dataset_dir
dataset_iterate_ratio: 0.7 # use only portion of the dataset
train_val_test_ratio: [0.8, 0.1, 0.1]
batch_size: 16
num_workers: 0  # no need to set if all data in GPU
## Sequence length
n_seq_before: 100
n_seq_after: 99
n_seq_total: 200
n_seq_stride: 2
## Img
enable_resnet_preprocess: True
img_crop_pixel: 350   # cropped from 480x440
img_input_size: 224   # resized the cropped img
img_start_idx: 0    # shift in starting index
## Param and positional
param_start_idx: 2
param_size: 11   # number of expr. parameters
pos_start_idx: 0
pos_size: 15 # time, position, distance
## Output
enable_standardization: False # not supported
output_start_index: 13
output_size: 40

# Model
model: "STEN-GP"  # None
## embedding
enable_img_embed: True
enable_param_embed: True
enable_pos_embed: True
img_embed_dim: 512    # number of conv. features
param_embed_dim: 4
pos_embed_dim: 4
embed_dim: 616
## encoder
encoder_layer_size: 1
encoder_num_heads: 4
enable_residual_gamma: True
enable_layer_norm: True
enable_dropout: True
dropout: 0.2
## decoder
output_option: 'Profile40' #'WHA', 'W4HA',

# Training
num_epochs: 60
optimizer_option: 'adam' # adam
lr: 2.0e-5  # learning rate
enable_weight_decay: False
wd: 1.0e-5  # weight decay
enable_adaptive_lr: True
lr_gamma: 0.985  # lr reduction factor for each epoch
early_stop: False

# Checkpoint
checkpoint_dir: './'
enable_save_best_model: True
checkpoint_epoch_interval: 20

# Log
log_dir: 'logs/'
enable_tensorboard: True
enable_save_history_stats_to_csv: True
enable_save_activation: False
enable_save_attention: False

